# This Source Code Form is subject to the terms of the Mozilla Public
# License, v. 2.0. If a copy of the MPL was not distributed with this
# file, You can obtain one at http://mozilla.org/MPL/2.0/.

# This file defines the metrics that are recorded by the Glean SDK.
# APIs to use these pings are automatically generated at build time using
# the `glean_parser` PyPI package.

# Metrics in this file may make use of SDK reserved ping names. See
# https://mozilla.github.io/glean/book/dev/core/internal/reserved-ping-names.html
# for additional information.

---
$schema: moz://mozilla.org/schemas/glean/metrics/2-0-0

rally:
  id:
    type: uuid
    lifetime: user
    send_in_pings:
      - study-enrollment
      - deletion-request
      - study-initialization
      - ballot-interaction
      - notice-interaction
      - modal-interaction
      - serp-visit
      - online-service-navigation
      - events
    description: |
      The id of the Rally client. This is generated by
      the Rally SDKs. A value of 00000000-0000-0000-0000-000000000000
      indicates a test payload. A value of 11111111-1111-1111-1111-111111111111
      indicates that the Rally id was not found or properly set.
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never


study_initialization:
  condition_type:
    type: string
    description: |
      The randomly chosen condition group for the participant.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  survey_id:
    type: string
    description: |
      A randomly generated unique ID that enables syncing survey
      data on Qualtrics with other data in the study.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  default_search_engine:
    type: string
    description: |
      The participant's default search engine in web browser settings.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  ask_query_count:
    type: quantity
    unit: queries
    description: |
      The number of unique search queries (the text a user enters into a search
      engine) to Ask.com over the past 30 days from browser history.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  baidu_query_count:
    type: quantity
    unit: queries
    description: |
      The number of unique search queries (the text a user enters into a search
      engine) to Baidu over the past 30 days from browser history.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  bing_query_count:
    type: quantity
    unit: queries
    description: |
      The number of unique search queries (the text a user enters into a search
      engine) to Bing over the past 30 days from browser history.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  duckduckgo_query_count:
    type: quantity
    unit: queries
    description: |
      The number of unique search queries (the text a user enters into a search
      engine) to DuckDuckGo over the past 30 days from browser history.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  ecosia_query_count:
    type: quantity
    unit: queries
    description: |
      The number of unique search queries (the text a user enters into a search
      engine) to Ecosia over the past 30 days from browser history.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  google_query_count:
    type: quantity
    unit: queries
    description: |
      The number of unique search queries (the text a user enters into a search
      engine) to Google over the past 30 days from browser history.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  yahoo_query_count:
    type: quantity
    unit: queries
    description: |
      The number of unique search queries (the text a user enters into a search
      engine) to Yahoo! over the past 30 days from browser history.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  yandex_query_count:
    type: quantity
    unit: queries
    description: |
      The number of unique search queries (the text a user enters into a search
      engine) to Yandex over the past 30 days from browser history.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  history_age:
    type: quantity
    unit: milliseconds
    description: |
      How far back the browser's history goes, with a maximum of 30 days.
      We collect this value to account for participants who have a browser
      history that is shorter than 30 days.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  landing_page_history:
    type: boolean
    description: |
      If the advertisement landing page is in browser history.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  enrollment_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time when the participant joined the study.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the data submission ping was generated.
    lifetime: ping
    send_in_pings:
      - study-initialization
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

ballot_interaction:
  old_search_engine:
    type: string
    description: |
      The participant's default search engine in web browser settings,
      before the treatment was applied.
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  new_search_engine:
    type: string
    description: |
      The search engine that the participant selected and the default
      was changed to.
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  ballot_ordering:
    type: string_list
    description: |
      The ordering of the search engines on the ballot.
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  attempts:
    type: quantity
    unit: attempts
    description: |
      The number of times that a choice ballot was presented to the
      participant. If a selection is not made after 3 attempts, the
      ballot is not shown again.
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
    no_lint:
      - UNIT_IN_NAME
  treatment_completion_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the treatment was completed.
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the data submission ping was generated.
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  attempt_details:
    type: event
    description: |
      Details for each of the ballot attempts.
    lifetime: ping
    send_in_pings:
      - ballot-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
    extra_keys:
      attempt_number:
        description: |
          What number attempt this was.
        type: quantity
      see_more_selected:
        description: |
          If the user clicked the “See More Search Engines” button
          (only relevant in Condition 7).
        type: boolean
      details_expanded:
        description: |
          The names of search engines on the ballot for which the participant
          expanded details (only relevant in Condition 5).
        type: string
      attention_duration:
        description: |
          How long the presentation of the ballot had the user's attention.
        type: quantity
      treatment_time:
        description: |
          The time that the ballot was presented to the participant.
        type: quantity
      dwell_time:
        description: |
          How long the presentation of the ballot was open.
        type: quantity

notice_interaction:
  attention_duration:
    type: quantity
    unit: milliseconds
    description: |
      How long the treatment notice had the participant's attention.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  dwell_time:
    type: quantity
    unit: milliseconds
    description: |
      How long the treatment notice was open.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  revert_selected:
    type: boolean
    description: |
      Whether the participant selected the revert button.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  old_search_engine:
    type: string
    description: |
      The participant's default search engine in web browser settings,
      before the treatment was applied.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  new_search_engine:
    type: string
    description: |
      The search engine that the default was changed to.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  treatment_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the treatment was applied.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  treatment_completion_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the treatment was completed.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the data submission ping was generated.
    lifetime: ping
    send_in_pings:
      - notice-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

modal_interaction:
  revert_selected:
    type: boolean
    description: |
      Whether the participant chose to revert the search engine change.
    lifetime: ping
    send_in_pings:
      - modal-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  treatment_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the modal dialog was presented to the participant.
    lifetime: ping
    send_in_pings:
      - modal-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the data submission ping was generated.
    lifetime: ping
    send_in_pings:
      - modal-interaction
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

serp_visit:
  search_engine:
    type: string
    description: |
      Which search engine the user queried.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  query_hash:
    type: string
    description: |
      A salted hash of the search query.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  results_num:
    type: quantity
    unit: results
    description: |
      The number of results produced for the query by the search engine.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  google_results_num:
    type: quantity
    unit: results
    description: |
      The number of results produced for the query by Google.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  query_vertical:
    type: string
    description: |
      The category of online content the search query is for.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  page_loaded:
    type: boolean
    description: |
      Whether the SERP completed loading in the participant's browser.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  attention_duration:
    type: quantity
    unit: milliseconds
    description: |
      How long the SERP had the participant's attention.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  dwell_time:
    type: quantity
    unit: milliseconds
    description: |
      How long the SERP was open in the participant's browser.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  page_number:
    type: quantity
    unit: page
    description: |
      The page number of the results for the query.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  attribution:
    type: string
    description: |
      How the user navigated to the search engine.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  attribution_id:
    type: string
    description: |
      A randomly generated unique ID that associates related SERPs.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  transition:
    type: string
    description: |
       The transition that brought the participant to this particular page.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  organic_details:
    type: event
    description: |
      Details for each of the organic results on the SERP.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
    extra_keys:
      result_top_height:
        description: |
          The number of pixels between the top of the page and the
          top of the organic result.
        type: quantity
      result_bottom_height:
        description: |
          The number of pixels between the top of the page and the
          bottom of the organic result.
        type: quantity
      result_page_num:
        description: |
          The page number that the organic result was on (only
          collected for DuckDuckGo SERPs, because they present
          results as one continuously scrolling page)
        type: quantity
      result_online_service:
        description: |
          The online service of the result only if the result
          is for one of the tracked online services.
        type: string

  organic_clicks:
    type: event
    description: |
      Details for each selection of an organic result on the SERP.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
    extra_keys:
      result_ranking:
        description: |
          The ranking of the selected organic result.
        type: quantity
      attention_duration_upon_click:
        description: |
          The attention duration when the selection occurred.
        type: quantity
      page_loaded_upon_selection:
        description: |
          Whether the SERP completed loading when the selection occurred.
        type: boolean

  num_ads:
    type: quantity
    unit: pages
    description: |
      The number of advertisements on the page.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  num_ad_clicks:
    type: quantity
    unit: clicks
    description: |
      The number of advertisements that the participant clicked on.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
    no_lint:
      - UNIT_IN_NAME

  self_preferenced_details:
    type: event
    description: |
      Details for each of the tracked self-preferenced results on the SERP.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
    extra_keys:
      result_top_height:
        description: |
          The number of pixels between the top of the page and
          the top of the self preferenced result.
        type: quantity
      result_bottom_height:
        description: |
          The number of pixels between the top of the page and
          the bottom of the self preferenced result.
        type: quantity
      self_preferenced_result_type:
        description: |
          The type of self-preferenced result that is on the page
          (flights, hotels, other travel, maps, lyrics, weather, shopping,
          or other direct answer).
        type: string

  num_self_preferenced_clicks:
    type: quantity
    unit: clicks
    description: |
      The number of selections of links in the self-preferenced results.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
    no_lint:
      - UNIT_IN_NAME

  num_internal_clicks:
    type: quantity
    unit: clicks
    description: |
      The number of result links that the participant clicks and that lead
      to another page operated by the same company as the search engine.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
    no_lint:
      - UNIT_IN_NAME

  search_area_top_height:
    type: quantity
    unit: pixels
    description: |
      The number of pixels between the top of the page and the top of
      the search result area.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  search_area_bottom_height:
    type: quantity
    unit: pixels
    description: |
      The number of pixels between the top of the page and the bottom of
      the search result area.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  time_since_same_query:
    type: quantity
    unit: milliseconds
    description: |
      The time since the participant made the same query to the
      same search engine.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  page_visit_start_time:
    type: datetime
    time_unit: millisecond
    description: |
      The timestamp the SERP visit started rounded down to the nearest hour.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the data submission ping was generated.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  current_default_engine:
    type: string
    description: |
      The participant's default search engine at the time of the SERP visit.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  navigational_query:
    type: string
    description: |
      If the search query was a navigational query to one of the tracked online
      services or Google services, then this will be the category of the online
      service it was for.
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

  modification_type:
    type: string
    description: |
      The type of modification that the study attempted to make to the
      self-preferenced results on the search engine response page
      (None, Removal, Replacement).
    lifetime: ping
    send_in_pings:
      - serp-visit
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never

online_service_navigation:
  online_service_data:
    type: event
    description: |
      Accumulated participant navigation data for each of the tracked
      Google services and online services.
    lifetime: ping
    send_in_pings:
      - online-service-navigation
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
    extra_keys:
      service_name:
        description: |
          The name of the service.
        type: string
      attention_time:
        description: |
          Total attention time during the current aggregation period.
        type: quantity
      dwell_time:
        description: |
          Total dwell time during the current aggregation period.
        type: quantity
      page_visit_count:
        description: |
          Count of pages visited during the current aggregation period.
        type: quantity
      completed_transaction_count:
        description: |
          Count of transactions completed during the current
          aggregation period.
        type: quantity
  aggregation_period_start_time:
    type: datetime
    time_unit: millisecond
    description: |
      The start time of the current aggregation period.
    lifetime: ping
    send_in_pings:
      - online-service-navigation
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
  ping_time:
    type: datetime
    time_unit: millisecond
    description: |
      The time that the data submission ping was generated.
    lifetime: ping
    send_in_pings:
      - online-service-navigation
    bugs:
      - https://bugzilla.mozilla.org/show_bug.cgi?id=1748721
    data_reviews:
      - https://docs.google.com/document/d/1TDfq3wwX2lPgCPVnksWaMtvEKiPCNuAQxITfob38Ga0
    notification_emails:
      - than@mozilla.com
    expires: never
